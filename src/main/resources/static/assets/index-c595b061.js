import{c as z,d as D,u as ie,a,b as O,B as le,t as G,n as U,m as ue,w as j,e as K,r as de,f as me,g as pe,h as H,i as fe,j as Y,k as ge,I as ve,l as M,o as y,p as he,q as J,s as be,v as _e,x as ke,y as ye,z as xe,A as P,C as V,D as b,E as Ie,F,G as C,H as R,J as w,K as B}from"./index-47e2b40a.js";/* empty css              */import{P as Pe}from"./index-ec807d4b.js";import{L as Ce}from"./index-5035f66e.js";import{S as Te,a as Se,T as Le,b as Ve}from"./index-c7415b77.js";import{I as Ee}from"./index-84671b39.js";import"./index-dd22c253.js";import{f as Q,F as Ne}from"./index-9c118d08.js";import{l as Re,s as we,u as Be,c as $e}from"./index-79c4f64d.js";import{S as De}from"./base64-982431c5.js";import{u as qe}from"./useApp-90f235e4.js";import{_ as Ae}from"./ProductItem.vue_vue_type_style_index_0_lang-957453e5.js";import{u as Fe}from"./use-id-b95949a2.js";import"./use-tab-status-6cb74775.js";import"./index-59155b31.js";const[W,Oe]=z("grid"),Ge={square:Boolean,center:G,border:G,gutter:U,reverse:Boolean,iconSize:U,direction:String,clickable:Boolean,columnNum:ue(4)},X=Symbol(W);var Ue=D({name:W,props:Ge,setup(t,{slots:e}){const{linkChildren:s}=ie(X);return s({props:t}),()=>{var p;return a("div",{style:{paddingLeft:O(t.gutter)},class:[Oe(),{[le]:t.border&&!t.gutter}]},[(p=e.default)==null?void 0:p.call(e)])}}});const ze=j(Ue),[je,$]=z("grid-item"),Ke=K({},de,{dot:Boolean,text:String,icon:String,badge:U,iconColor:String,iconPrefix:String,badgeProps:Object});var He=D({name:je,props:Ke,setup(t,{slots:e}){const{parent:s,index:p}=me(X),f=pe();if(!s)return;const m=H(()=>{const{square:c,gutter:r,columnNum:u}=s.props,v=`${100/+u}%`,d={flexBasis:v};if(c)d.paddingTop=v;else if(r){const h=O(r);d.paddingRight=h,p.value>=+u&&(d.marginTop=h)}return d}),g=H(()=>{const{square:c,gutter:r}=s.props;if(c&&r){const u=O(r);return{right:u,bottom:u,height:"auto"}}}),x=()=>{if(e.icon)return a(ge,Y({dot:t.dot,content:t.badge},t.badgeProps),{default:e.icon});if(t.icon)return a(ve,{dot:t.dot,name:t.icon,size:s.props.iconSize,badge:t.badge,class:$("icon"),color:t.iconColor,badgeProps:t.badgeProps,classPrefix:t.iconPrefix},null)},I=()=>{if(e.text)return e.text();if(t.text)return a("span",{class:$("text")},[t.text])},T=()=>e.default?e.default():[x(),I()];return()=>{const{center:c,border:r,square:u,gutter:v,reverse:d,direction:h,clickable:_}=s.props,k=[$("content",[h,{center:c,square:u,reverse:d,clickable:_,surround:r&&v}]),{[fe]:r}];return a("div",{class:[$({square:u})],style:m.value},[a("div",{role:_?"button":void 0,class:k,style:g.value,tabindex:_?0:void 0,onClick:f},[T()])])}}});const Me=j(He),[Je,L,Ye]=z("search"),Qe=K({},Q,{label:String,shape:M("square"),leftIcon:M("search"),clearable:G,actionText:String,background:String,showAction:Boolean});var We=D({name:Je,props:Qe,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:s,attrs:p}){const f=Fe(),m=y(),g=()=>{s.action||(e("update:modelValue",""),e("cancel"))},x=n=>{n.keyCode===13&&(be(n),e("search",t.modelValue))},I=()=>t.id||`${f}-input`,T=()=>{if(s.label||t.label)return a("label",{class:L("label"),for:I()},[s.label?s.label():t.label])},c=()=>{if(t.showAction){const n=t.actionText||Ye("cancel");return a("div",{class:L("action"),role:"button",tabindex:0,onClick:g},[s.action?s.action():n])}},r=()=>{var n;return(n=m.value)==null?void 0:n.blur()},u=()=>{var n;return(n=m.value)==null?void 0:n.focus()},v=n=>e("blur",n),d=n=>e("focus",n),h=n=>e("clear",n),_=n=>e("clickInput",n),k=n=>e("clickLeftIcon",n),q=n=>e("clickRightIcon",n),E=Object.keys(Q),A=()=>{const n=K({},p,J(t,E),{id:I()}),i=l=>e("update:modelValue",l);return a(Ne,Y({ref:m,type:"search",class:L("field"),border:!1,onBlur:v,onFocus:d,onClear:h,onKeypress:x,onClickInput:_,onClickLeftIcon:k,onClickRightIcon:q,"onUpdate:modelValue":i},n),J(s,["left-icon","right-icon"]))};return he({focus:u,blur:r}),()=>{var n;return a("div",{class:L({"show-action":t.showAction}),style:{background:t.background}},[(n=s.left)==null?void 0:n.call(s),a("div",{class:L("content",t.shape)},[T(),A()]),c()])}}});const Xe=j(We);const Ze={class:"tabbar-container home"},et=V("div",{class:"top-bg"},null,-1),tt={class:"navbar"},nt=V("span",{class:"tip"},"多多省助手",-1),ot={class:"product-container"},at=V("div",{class:"divider-list"},null,-1),kt=D({name:"Home",__name:"index",setup(t){qe();const{assets:e}=Ie(),s=y("购物搜券拿返利"),p=y(2),f=y(!1),m=y(!1),g=y(!1),x=[{id:2,name:"精选"},{id:23,name:"为你推荐"},{id:22,name:"热销"},{id:10,name:"9.9包邮"},{id:26,name:"母婴"},{id:28,name:"美妆穿搭"},{id:30,name:"图书"},{id:27,name:"居家"},{id:25,name:"超市"}],I=[{image:e("banner.png"),type:"search"}],T=[{image:e("hot.png"),type:"hot",name:"今日热卖",routeName:"Hot"},{image:e("jd.png"),type:2,name:"京东优惠",routeName:"ProductList"},{image:e("pdd.png"),type:1,name:"拼多多",routeName:"ProductList"},{image:e("tb.png"),type:3,name:"淘宝优惠",routeName:"ProductList"},{image:e("wph.png"),type:5,name:"唯品会",routeName:"ProductList"},{image:e("dy.png"),type:4,name:"抖音优惠",routeName:"ProductList"},{image:e("mt.png"),type:"mt",name:"美团外卖",routeName:"MeiTuan"},{image:e("ele.png"),type:"ele",name:"饿了么",routeName:"Ele"},{image:e("didi.png"),type:"didi",name:"滴滴打车",routeName:"Taxi"},{image:e("movie.png"),type:"movie",name:"特价电影"}],c=y([]),r=_e({optId:x[0].id,source:De.JD,page:1,pageSize:20});let u=0;ke(()=>{document.documentElement.scrollTop=u,B.on("backTop",v),document.addEventListener("scroll",d)}),ye(()=>{B.off("backTop",v),document.removeEventListener("scroll",d)});const v=()=>{document.documentElement.scrollTo({left:0,top:0,behavior:"smooth"})},d=()=>{u=document.documentElement.scrollTop,document.documentElement.scrollTop>500?B.emit("scrollTop",!0):B.emit("scrollTop",!1)},h=i=>{if(i.type==="movie"){we({message:"加载中",duration:0}),Be(3).then(l=>{$e(),setTimeout(()=>{window.open(l.data.h5??"")},100)});return}i.routeName==="ProductList"?F.push({name:"ProductList",query:{type:i.type}}):F.push({name:i.routeName})},_=i=>{r.optId=i.name,k()},k=()=>{g.value=!0,f.value=!1,m.value=!0,r.page=1,E()},q=()=>{c.value.length!==0&&(r.page++,E())},E=()=>{Re(r).then(i=>{var N,S;const l=((N=i.data)==null?void 0:N.list)??[];g.value=!1,f.value=!1,r.page===1?c.value=l:c.value=c.value.concat(l),m.value=c===((S=i.data)==null?void 0:S.total)}).catch(i=>{r.page>1&&r.page--,g.value=!1,f.value=!1,m.value=!0})};xe(()=>{k()});const A=i=>{},n=()=>{F.push({name:"Search"})};return(i,l)=>{const N=Xe,S=Ee,Z=Te,ee=Se,te=Me,ne=ze,oe=Le,ae=Ve,se=Ce,re=Pe;return C(),P("div",Ze,[et,V("div",tt,[a(N,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value=o),class:"search",readonly:"",shape:"round",background:"linear-gradient(to right, #fe8124, #e45119)",placeholder:"",onClickInput:n},{left:b(()=>[nt]),_:1},8,["modelValue"])]),a(re,{ref:"pullRefreshRef",class:"pullrefresh",modelValue:g.value,"onUpdate:modelValue":l[3]||(l[3]=o=>g.value=o),onRefresh:k},{default:b(()=>[a(ee,{autoplay:3e3,"indicator-color":"white",class:"banner"},{default:b(()=>[(C(),P(R,null,w(I,o=>a(Z,{key:o.image,style:{"border-radius":"10px"},onClick:ce=>A(o)},{default:b(()=>[a(S,{radius:10,fit:"contain",src:o.image},null,8,["src"])]),_:2},1032,["onClick"])),64))]),_:1}),a(ne,{"column-num":5,border:!1},{default:b(()=>[(C(),P(R,null,w(T,o=>a(te,{key:o.type,text:o.name,onClick:ce=>h(o)},{icon:b(()=>[a(S,{width:"36",height:"36",src:o.image},null,8,["src"])]),_:2},1032,["text","onClick"])),64))]),_:1}),V("div",ot,[a(ae,{active:p.value,"onUpdate:active":l[1]||(l[1]=o=>p.value=o),onClickTab:_,"line-width":"20",color:"#fe8124","title-active-color":"#fe8124"},{default:b(()=>[(C(),P(R,null,w(x,o=>a(oe,{title:o.name,key:o.id,name:o.id},null,8,["title","name"])),64))]),_:1},8,["active"]),a(se,{loading:f.value,"onUpdate:loading":l[2]||(l[2]=o=>f.value=o),finished:m.value,"finished-text":c.value.length>0?"没有更多了":"",onLoad:q},{default:b(()=>[(C(!0),P(R,null,w(c.value,o=>(C(),P("div",{style:{position:"relative"},key:o.goods_id},[a(Ae,{product:o},null,8,["product"]),at]))),128))]),_:1},8,["loading","finished","finished-text"])])]),_:1},8,["modelValue"])])}}});export{kt as default};
