import{d as M,X as A,Q as D,o as _,z as O,A as l,a as d,D as V,H as k,E as j,G as n,J as C,C as s,M as r,_ as v,N as I,a0 as q,$ as F,O as G,P as H}from"./index-47e2b40a.js";/* empty css              */import{P as J}from"./index-ec807d4b.js";import{E as Q}from"./index-03d0c034.js";import{L as X}from"./index-5035f66e.js";import{I as $}from"./index-84671b39.js";import{b as K,T as W}from"./index-c7415b77.js";import{o as Y}from"./index-79c4f64d.js";import{u as Z}from"./useApp-90f235e4.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import"./use-id-b95949a2.js";import"./use-tab-status-6cb74775.js";const x=m=>(G("data-v-7190087c"),m=m(),H(),m),se=x(()=>s("div",{style:{height:"12px"}},null,-1)),te={class:"flex-column order-item"},ae={class:"order-time"},oe={class:"flex"},ne={class:"flexable order-time"},le={key:0,class:"flexable order-time"},re=x(()=>s("div",{class:"divider",style:{"margin-top":"7px","margin-bottom":"7px"}},null,-1)),ie={class:"flex"},de={class:"order-product-content"},ue={class:"order-product-title van-multi-ellipsis--l2"},ce={class:"flex order-product-price"},pe=x(()=>s("div",{style:{"font-size":"12px"}},"¥",-1)),_e={class:"order-product-num"},ve={key:0,style:{"margin-right":"16px"}},me=x(()=>s("span",{style:{"font-size":"12px"}},"¥",-1)),fe={key:1,class:"order-status-span"},he=M({name:"Order",__name:"index",setup(m){var L;Z();const N=A();D();const{assets:u}=j(),w=[{id:0,name:"全部"},{id:1,name:"待收货"},{id:2,name:"待结算"},{id:3,name:"已结算"},{id:4,name:"已失效"}],z={1:u("pdd.png"),2:u("jd.png"),3:u("tb.png"),4:u("dy.png"),5:u("wph.png")},c=_(0);c.value=parseInt(((L=N.query.type)==null?void 0:L.toString())??"0");const t={page:1,pageSize:20},a=_([]),i=_(!1),p=_(!1),f=_(!1),E=()=>{a.value=[],y()},y=()=>{i.value=!0,p.value=!1,f.value=!0,t.page=1,T()},P=()=>{a.value.length<t.page||(t.page++,T())},T=()=>{c.value!==0?t.status=c.value:t.status=void 0,Y(t).then(b=>{var h,g;const o=((h=b.data)==null?void 0:h.list)??[];t.page===1?a.value=o:a.value=a.value.concat(o),i.value=!1,p.value=!1,f.value=a.value.length>=((g=b.data)==null?void 0:g.total)}).catch(()=>{i.value=!1,p.value=!1,f.value=!0,t.page>1&&t.page--})};return O(()=>{y()}),(b,o)=>{const h=W,g=K,S=$,R=X,B=Q,U=J;return n(),l(k,null,[d(g,{active:c.value,"onUpdate:active":o[0]||(o[0]=e=>c.value=e),onChange:E},{default:V(()=>[(n(),l(k,null,C(w,e=>d(h,{key:e.id,title:e.name,name:e.id},null,8,["title","name"])),64))]),_:1},8,["active"]),d(U,{class:"page-container",modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),onRefresh:y},{default:V(()=>[d(R,{loading:p.value,"onUpdate:loading":o[1]||(o[1]=e=>p.value=e),finished:f.value,"finished-text":a.value.length>0?"没有更多了":"",onLoad:P},{default:V(()=>[(n(!0),l(k,null,C(a.value,e=>(n(),l("div",{key:e.id},[se,s("div",te,[s("span",ae,"订单号："+r(e.orderId),1),s("div",oe,[s("span",ne,"下单："+r(e.orderTime),1),e.finishTime?(n(),l("span",le,"完成："+r(e.finishTime),1)):v("",!0)]),re,s("div",ie,[d(S,{width:"80",height:"80",src:e.imageUrl},null,8,["src"]),s("div",de,[s("div",ue,[d(S,{width:"16",height:"16",src:z[e.orderSource??0].toString()},null,8,["src"]),I(" "+r(e.skuName),1)]),s("div",ce,[pe,s("div",null,r(e.priceTotal),1),s("div",_e,"共"+r(e.skuNum)+"件",1),e.rebate?(n(),l("div",ve,[I(" 返 "),me,I(r(e.rebate),1)])):v("",!0)])])]),e.status?(n(),l("div",{key:0,class:q(["order-status-bg-b",{"order-status-bg-invalid":e.status===4}])},null,2)):v("",!0),e.status?(n(),l("div",fe,r(e.status===1?"待收货":e.status===2?"待结算":e.status===3?"已结算":"已失效"),1)):v("",!0)])]))),128))]),_:1},8,["loading","finished","finished-text"]),!i.value&&a.value.length===0?(n(),F(B,{key:0,style:{height:"calc(100vh - 150px)"},description:"还没有数据~"})):v("",!0)]),_:1},8,["modelValue"])],64)}}});const we=ee(he,[["__scopeId","data-v-7190087c"]]);export{we as default};
