import{r as x,o as M,n as I,u as N,c,d as P,a as j,e as E,g as F,b as z,f as H,m as D,i as K,h as U,w as h,j as _,F as Y,k as Z,l as k,p as q}from"./index.d6fe9d3a.js";import{o as G,c as A,t as T,n as p,m as J,g as L,B as Q,a as W,w as S,r as X,u as ee,b as te,I as ae}from"./index.20779794.js";const ne=(e,n)=>{const t=x(),a=()=>{t.value=N(e).height};return M(()=>{if(I(a),n)for(let s=1;s<=3;s++)setTimeout(a,100*s)}),G(()=>I(a)),t};function oe(e,n){const t=ne(e,!0);return a=>c("div",{class:n("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[a()])}const[w,y]=A("tabbar"),re={route:Boolean,fixed:T,border:T,zIndex:p,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:J(0),safeAreaInsetBottom:{type:Boolean,default:null}},O=Symbol(w);var se=P({name:w,props:re,emits:["change","update:modelValue"],setup(e,{emit:n,slots:t}){const a=x(),{linkChildren:s}=j(O),u=oe(a,y),v=()=>{var o;return(o=e.safeAreaInsetBottom)!=null?o:e.fixed},l=()=>{var o;const{fixed:r,zIndex:i,border:m}=e;return c("div",{ref:a,role:"tablist",style:L(i),class:[y({fixed:r}),{[Q]:m,"van-safe-area-bottom":v()}]},[(o=t.default)==null?void 0:o.call(t)])};return s({props:e,setActive:(o,r)=>{W(e.beforeChange,{args:[o],done(){n("update:modelValue",o),n("change",o),r()}})}}),()=>e.fixed&&e.placeholder?u(l):l()}});const ce=S(se),[le,g]=A("tabbar-item"),ue=E({},X,{dot:Boolean,icon:String,name:p,badge:p,badgeProps:Object,iconPrefix:String});var ie=P({name:le,props:ue,emits:["click"],setup(e,{emit:n,slots:t}){const a=ee(),s=F().proxy,{parent:u,index:v}=z(O);if(!u)return;const l=H(()=>{var r;const{route:i,modelValue:m}=u.props;if(i&&"$route"in s){const{$route:b}=s,{to:f}=e,d=K(f)?f:{path:f};return!!b.matched.find(C=>{const R="path"in d&&d.path===C.path,$="name"in d&&d.name===C.name;return R||$})}return((r=e.name)!=null?r:v.value)===m}),B=r=>{var i;l.value||u.setActive((i=e.name)!=null?i:v.value,a),n("click",r)},o=()=>{if(t.icon)return t.icon({active:l.value});if(e.icon)return c(ae,{name:e.icon,classPrefix:e.iconPrefix},null)};return()=>{var r;const{dot:i,badge:m}=e,{activeColor:b,inactiveColor:f}=u.props,d=l.value?b:f;return c("div",{role:"tab",class:g({active:l.value}),style:{color:d},tabindex:0,"aria-selected":l.value,onClick:B},[c(te,D({dot:i,class:g("icon"),content:m},e.badgeProps),{default:o}),c("div",{class:g("text")},[(r=t.default)==null?void 0:r.call(t,{active:l.value})])])}}});const V=S(ie),fe=P({__name:"tabbar",setup(e){const n=x("home");return(t,a)=>{const s=q("router-view");return Z(),U(Y,null,[c(s),c(_(ce),{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=u=>n.value=u)},{default:h(()=>[c(_(V),{name:"home",to:"/home",icon:"home-o"},{default:h(()=>[k("\u9996\u9875")]),_:1}),c(_(V),{name:"mine",to:"/mine",icon:"friends-o"},{default:h(()=>[k("\u6211\u7684")]),_:1})]),_:1},8,["modelValue"])],64)}}});export{fe as default};
